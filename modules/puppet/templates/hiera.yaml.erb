# <%= @puppet_header %>
# <%=  __FILE__.gsub(/.*?repos/,@fqdn + ':') %>
---
version: 5
defaults:
  data_hash: yaml_data
  datadir: /var/lib/dpp/repos


# hack around not being able to specify more than one datadir, at least till they fix it
hierarchy:
  - name: host
    globs:
      - "private/hiera/host/%{hostname}/%{calling_module}"
      - "shared/hiera/host/%{hostname}/%{calling_module}"
      - "public/hiera/host/%{hostname}/%{calling_module}"
      - "private/hiera/host/%{hostname}/*.yaml"
      - "shared/hiera/host/%{hostname}/*.yaml"
      - "public/hiera/host/%{hostname}/*.yaml"
  - name: project
    globs:
      - "private/hiera/host/%{project}/%{calling_module}"
      - "shared/hiera/host/%{project}/%{calling_module}"
      - "public/hiera/host/%{project}/%{calling_module}"
      - "private/hiera/host/%{project}/*.yaml"
      - "shared/hiera/host/%{project}/*.yaml"
      - "public/hiera/host/%{project}/*.yaml"
  - name: location
    globs:
      - "private/hiera/location/%{location}/%{calling_module}"
      - "shared/hiera/location/%{location}/%{calling_module}"
      - "public/hiera/location/%{location}/%{calling_module}"
      - "private/hiera/location/%{location}/common"
      - "shared/hiera/location/%{location}/common"
      - "public/hiera/location/%{location}/common"
  - name: top
    globs:
      - "private/hiera/common/%{calling_module}"
      - "shared/hiera/common/%{calling_module}"
      - "public/hiera/common/%{calling_module}"
      - "private/hiera/common/*.yaml"
      - "shared/hiera/common/*.yaml"
      - "public/hiera/common/*.yaml"
      - "private/hiera/lookup.yaml"
      - "shared/hiera/lookup.yaml"
      - "public/hiera/lookup.yaml"
